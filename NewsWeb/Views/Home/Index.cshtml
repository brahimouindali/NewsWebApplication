@inject NewsWeb.Services.CategoryService categoryService
@model IEnumerable<Article>
@{
    ViewData["Title"] = "Braoui";
}

@if (ViewBag.query != null && ViewBag.isFound == true)
{
    <h6>Le resultat de <span class="text-red">"@ViewBag.query"</span></h6>
}

<div class="row">
    @if (User.IsInRole(RoleName.WritersRole))
    {
        <div class="col-lg-8 col-md-12">
            <a asp-action="create" asp-controller="articles" class="btn btn-info btn-sm btn-block mb-2">
                <i class="fa fa-paper-plane" aria-hidden="true"></i> New
            </a>
        </div>
    }
    @if (User.IsInRole(RoleName.AdminsRole))
    {
        <div class="col-lg-8 col-md-12">
            <a href="identity/account/Register" class="btn btn-info btn-sm btn-block mb-2">
                <i class="fa fa-paper-plane" aria-hidden="true"></i> New user
            </a>
        </div>
    }
</div>

<div class="row">
    @(await Html.RenderComponentAsync<ArticlesSlide>(RenderMode.Static, new { Articles = Model }))
    <div class="aside px-2 col-lg-4 col-md-3">
        @(await Html.RenderComponentAsync<ArtlicleList>(RenderMode.ServerPrerendered))
    </div>
</div>

<div>
    @{ var categories = categoryService.getCategories(); }
    @if (categories.Count() > 0)
    {
        @foreach (var item in categories)
        {
            @(await Html.RenderComponentAsync<ArticlesparCategory>(RenderMode.ServerPrerendered, new { name = item.Name }))
        }
    }
</div>
